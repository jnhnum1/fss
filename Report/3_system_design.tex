\section{System Design}

Tra introduced the novel idea of {\em vector time pairs}, which allows Tra to provide very strong guarantees such as {\em no false positives} and {\em no meta-data for deleted files} among others. Our main system design is completely modelled after Tra.  In order to improve robustness and performance, we improve upon Tra by designing a File Watcher that monitors the user's actions in the background.  In addition, TnT is able to recover from machine crashes without losing updates.  We discuss these aspects of our system below.

\subsection{File Watcher}
TnT structures synchronization meta-data in the form of a {\em tree}, which stores modification histories and synchronization histories for every file/directory in the file system. We use the \href{http://godoc.org/code.google.com/p/go.exp/inotify}{\tt inotify} linux package, that allows the system to recognize when a user makes changes to the file system (such as creates/edits/deletes of files/directories) in an interrupt based manner. This allows us to keep the meta-data up-to-date with the latest state of the file system.

\subsection{Synchronization}
Along the lines of Tra, we consider only one-directional synchronization. Any two machines can synchronize their file systems independent of the rest of the machines.

\subsection{Failure Recovery}
We use a two-phase synchronization method to ensure that crashes do not affect the consistency of the system, even if they happen during sync.

\subsection{Meta-data costs}